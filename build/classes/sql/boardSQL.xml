<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/
sql-map-2.dtd'>
<sqlMap>

	<typeAlias alias="board" type="admin.board.AdminboardVO" />
	<typeAlias alias="commentt" type="member.board.cboardVO" />
	<!-- 由ъ젅??留??뺤쓽 -->
	<resultMap id="boardRes" class="board">
		<result property="board_num" column="board_num" />
		<result property="board_subject" column="board_subject" />
		<result property="board_content" column="board_content" />
		<result property="board_readhit" column="board_readhit" />
		<result property="board_regdate" column="board_regdate" />
		<result property="board_admin" column="board_admin" />
		<result property="board_orgname" column="board_orgname" />
		<result property="board_savname" column="board_savname" />
		<!-- <result property="board_commentno" column="board_commentno"/> -->

	</resultMap>

	<resultMap id="commentRes" class="commentt">
		<result property="comment_number" column="comment_number" />
		<result column="originno" property="originno" />
		<result property="comment_name" column="comment_name" />
		<result property="comment_password" column="comment_password" />
		<result property="comment_content" column="comment_content" />
		<result property="comment_date" column="comment_date" />
	</resultMap>

	<!-- 怨듯넻?쇰줈 ?ъ슜??select ???뺤쓽 -->
	<sql id="select-all">
		select*from board
	</sql>

	<sql id="select-com">
	select*from commentt
	</sql>


	<sql id="where-no">
		WHERE board_num = #board_num#
	</sql>


	<select id="selectAll" resultMap="boardRes">
		<include refid="select-all" />
		order by board_num desc
	</select>

	<select id="selectOne" resultMap="boardRes" parameterClass="int">
		<include refid="select-all" />
		<include refid="where-no" />
	</select>

	<select id="commentSelectAll" resultMap="commentRes"
		parameterClass="int"> SELECT * FROM commentt WHERE originno = #board_num#
		ORDER BY comment_number DESC </select>


	<select id="selectSearchW" parameterClass="string" resultMap="boardRes">
		<include refid="select-all" />
		where board_admin like #searchKeyword# order by board_num desc
	</select>

	<select id="selectSearchS" parameterClass="string" resultMap="boardRes">
		<include refid="select-all" />
		where board_subject like #searchKeyword# order by board_num desc
	</select>

	<select id="selectSearchC" parameterClass="string" resultMap="boardRes">
		<include refid="select-all" />
		where board_content like #searchKeyword# order by board_num desc
	</select>

	<select id="selectLastNo" resultClass="board">
		SELECT max(board_num) as board_num from board
	</select>

	<select id="selectPassword" resultMap="commentRes">

		<include refid="select-com" />

		<include refid="where-no" />
		AND comment_password = #comment_password#
	</select>

<!-- insert 荑쇰━臾??뺤쓽 -->
	<insert id="insertBoard" parameterClass="board">

		insert into board
		(board_num,board_subject,board_admin,board_content,board_regdate)
		values
		(board_no_seq.nextval,#board_subject#,#board_admin#,#board_content#,#board_regdate#)
	</insert>

	<insert id="insertComment" parameterClass="commentt">
		INSERT INTO COMMENTT(comment_number, comment_name, comment_password,
		comment_content, comment_date,orginno)
		VALUES (COMMENTT_NO_SEQ.NEXTVAL, #comment_name#, #comment_password#,
		#comment_content#, #comment_date#,#orginno#)
	</insert>


	<!-- update 荑쇰━臾??뺤쓽 -->
	<update id="updateBoard" parameterClass="board">
		update board set board_subject = #board_subject#,
		board_admin = #board_admin#,
		board_content=#board_content#
		<include refid="where-no" />
	</update>

	<update id="updateFile" parameterClass="board">
		update board set board_orgname = #board_orgname# , board_savname =
		#board_savname#
		<include refid="where-no" />
	</update>

	<update id="updateReadHit" parameterClass="board">
		update board set board_readhit = board_readHit + 1
		<include refid="where-no" />
	</update>


	<!-- delete 荑쇰━臾??뺤쓽 -->
	<delete id="deleteBoard" parameterClass="board">
		delete from board
		<include refid="where-no" />
	</delete>

</sqlMap>